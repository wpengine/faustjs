---
slug: /migrationPath/overview
title: Migration from Legacy Faust
---
<<<<<<< HEAD
Migrate from old version of Faust.js to new Faust

### This document is in progress. Check back soon for content!
=======

## General Guidelines

Currently, there is no great automated way to migrate from previous versions of Faust that use GQty to the recent version using Apollo. This is primarily due to their striking differences in the way the queries are performed.
However, there are some conventional techniques and best practices for React Development that will definitely help you with this process.

### Reusing Presentational Components
If you paid attention while developing your Faust website, the Components folder typically contains components that embody a presentational meaning.

By presentational we mean they do not depend on GQty or any hooks or side-effects and they just take props and render the data.
Here is an example of a presentational component taken from this [blueprint](https://github.com/wpengine/atlas-blueprint-portfolio/blob/main/components/PostInfo/PostInfo.js):

```js title="PostInfo.js"
export default function PostInfo({ className, author, date }) {
  if (!date && !author) {
    return null;
  }

  return (
    <div className={className}>
      {date && (
        <time dateTime={date}>
          <FormatDate date={date} />
        </time>
      )}
      {date && author && <>&nbsp;</>}
      {author && <span>By {author}</span>}
    </div>
  );
}
```

There is no reference to GQty or Apollo and this component can be safely re-used accross different applications.

On the other hand the following component is harder to migrate as it depends on the GQty client:

```js title="NavigationMenu.js"
export default function NavigationMenu({ className, menuLocation, children }) {
  const { useQuery } = client;
  const { nodes: menuItems } = useQuery().menuItems({
    where: {
      location: menuLocation,
    },
  });
  ...
```
You will have to either replace the `useQuery()` from GQty with the `useQuery()` of Apollo or perform the query on a higher level and pass on the menu items as props:

```js title="NavigationMenu.js"
export default function NavigationMenu({ menuItems, className, children }) {
  if (!menuItems) {
    return null;
  }
  return (
    <nav>...</nav>
  );
}
```

If you developed your components using this approach, you will be able to just transfer them without modifications to the new framework.

### Writing GraphQL Queries
The biggest hurdle when migrating from GQty to Apollo is that now you will need to write queries manually.
However this is not as bad as you think. You only need to identify the data that your pages and components need and try to request the appropriate fields.

For instance take a look at the `PostInfo` component we posted before. It supposed to display the `Post` Information using the `author` and `date` fields.
You can request those fields once the post or page fragment:

```
fragment PostsItemFragment on Post {
    id
    date
    uri
    title
    author {
    	node {
        	name
    	}
    }
}
```

This fragment is reusable and can be applied to any page query when requsting the Post data fields:

```
query GetPostsPage(
    $first: Int!
    $after: String
  ) {
    posts(first: $first, after: $after) {
      edges {
        node {
          ...PostsItemFragment
        }
      }
	}
}
```

By following this approach, writing queries for your pages become easier as you will be able to find and change them easily when needed.

### Using the WP Template system

If you chose to use the new Faust WP Template Hierarchy, you will need to create individual components for each Template.
Those components will be rendered according to the hierarchy rules, when you visit a page on the Headless website. More specifically you define:

**front-page.js**: For rendering your siteâ€™s front page.
**single.js**: For rendering a single post.
**page.js**: For rendering a static page (page post-type).
**category.js**: Representing category archive index pages.

The full list of templates are available at [WordPress Docs](https://developer.wordpress.org/themes/basics/template-hierarchy/#the-template-hierarchy-in-detail).
Bear in mind that not all types of templates are similated with Faust. You can check the dev console when you visit a page that gives you a hint of the available templates that this route can match:



You can see an example of the hierarchy in the [blueprint project](https://github.com/wpengine/atlas-blueprint-portfolio/tree/main/wp-templates) where we provided implementations for the main templates.

## Overview of the changes needed in to migrate from GQty to Apollo

Given the above information, we can now list an brief overview of the changes needed in to migrate from GQty to Apollo.

1. **Capture and migrate Presentational Components**

2. **Import Faust Dependencies**

## The file structure changes and rationale

## Any new tools helpful in working with Apollo

While migrating your app from GQty to Apollo, you will find Apollo Ecosystem has plenty of resources and tools to help you work with GraphQL.
We list some of the available tools here that will definitely help:

* **Apollo Client DevTools**: DevTools is a debugger toolbar for Chrome that allows you to inspect and perform queries against the GraphQL Endpoint within the browser.
    This tools is invaluable when trying to migrate existing GQty hooks into Apollo.
    [Link to Download](https://chrome.google.com/webstore/detail/apollo-client-devtools/jdkknkkbebbapilgoeccciglkfbmbnfm)
* **Apollo Fragments Guide**: Using the new Faust, you will have to write queries manually from now on. Using GraphQL fragments is a recommended way to share pieces of logic between multiple queries and mutations. Read [this guide](https://www.apollographql.com/docs/react/data/fragments/) for best practices and greate techniques to maximize using fragments.
>>>>>>> c44068f (Docs: WIP on Migration guide)
