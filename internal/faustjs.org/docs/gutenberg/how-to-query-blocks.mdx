---
slug: how-to-query-blocks
title: Various stategies to query block data attributes using wp-graphql-content-blocks plugin
---

# How to query blocks

The WPGraphQL Content Blocks plugin extends the WPGraphQL schema with new graphql types and fields.
This how to guide gives a brief overview of the different query strategies you can use.

## EditorBlock

* An interface type which represents a single block that is available in the block editor.
* A base type for all other object block types.

Here is an example query:

```graphql
fragment Paragraph on CoreParagraph {
  	attributes {
    	content
  	}
}

query GetAllPostsWhichSupportBlockEditor {
	posts {
		edges {
			node {
				# editorBlocks field represents array of EditorBlock
				editorBlocks {
					# fields from the interface
					__typename
					clientId
  					parentClientId
					name
					...Paragraph
				}
			}
		}
	}
}
```

## NodeWithEditorBlocks

* An interface type which represents a list of `EditorBlock` types.

Here is an example query:

```graphql
fragment Paragraph on CoreParagraph {
  	attributes {
    	content
  	}
}

query GetAllPostsWhichSupportBlockEditor {
	nodeByUri(uri: "/posts/hello-world") {
    ... on NodeWithEditorBlocks {
      editorBlocks {
        __typename
        clientId
        parentClientId
        name
        ...Paragraph
      }
    }
  }
}
```

and here is the result:

```json
{
	"data": {
		"nodeByUri": {
			"editorBlocks": [
				{
					"__typename": "CoreParagraph",
					"clientId": "642d960f45c05",
					"parentClientId": null,
					"name": "core/paragraph",
					"attributes": {
						"content": "Welcome to WordPress. This is your first post. Edit or delete it, then start writing!"
					}
				}
			]
		}
  	},
}
```

# How to query posts associated with a specific Post type

The plugin also offers support for the [allowed_block_types_all](https://developer.wordpress.org/reference/hooks/allowed_block_types_all/)
filter which controls which blocks are allowed in the block editor.

If you set a filter that returns a different list of blocks per post type the plugin will register a more specific set of interfaces for each post type.

```php
add_filter( 'allowed_block_types_all', 'set_allowed_block_types', 10, 2 );
/**
 * Set allowed gutenburg block types
 */
function set_allowed_block_types( $allowed_blocks, $editor_context ) {
	// return blocks types for type `Post`
	if ( isset( $editor_context->post ) && $editor_context->post instanceof WP_Post && 'post' === $editor_context->post->post_type ) {
		return  [
		   'core/image',
		   'core/paragraph'
		];
	 }
	// return blocks types for any other post type that supports the `editor` feature such as `Page`
	$allowed_blocks = array(
		'core/image',
		'core/columns',
		'core/column',
		'core/gallery',
		'core/paragraph'
	);
	return $allowed_blocks;
}

```

When you have the above filter enabled, the plugin will expose the following interfaces in the schema.

> **NOTE:** We assume that your site has only two posts types that support the `editor` feature: `Post` and `Page`.

## PostBlock

* A type that implements the `EditorBlock` interface and represents a single block that is available for the `Post` type.

Here is an example query:

```graphql
fragment Paragraph on CoreParagraph {
  	attributes {
    	content
  	}
}

query GetAllPostsWhichSupportBlockEditor {
	posts {
		edges {
			node {
				# editorBlocks field represents array of EditorBlock
				editorBlocks {
					# fields from the interface
					__typename
					clientId
  					parentClientId
					name
					...Paragraph
				}
			}
		}
	}
}
```

Notice that the query is exactly the same as before. However, now the type of the `editorBlocks` is different.
Instead of `[EditorBlock]` it is `[PostBlock]`. You can see the resolved type when you search for the type in the documentation section:

<img src="/docs/img/gutenberg-query-post-block-type.png" alt="PostBlock interface type" />

Expanding the `PostBlock` interface docs, shows that the type only implements the two blocks we declared in the `allowed_block_types_all` filter:

<img src="/docs/img/gutenberg-post-block-implementations.png" alt="PostBlock interface type implementations" />

## PageBlock

* A type that implements the `EditorBlock` interface and represents a single block that is available for the `Page` type.

Same as above, the `PageBlock` implements the list of for five allowed block types:

<img src="/docs/img/gutenberg-page-block-implementations.png" alt="PageBlock interface type implementations" />

## NodeWithPostBlocks

* An interface type which represents a list of `PostBlock` types.

Here is an example query:

```graphql
fragment Paragraph on CoreParagraph {
  	attributes {
    	content
  	}
}

fragment Gallery on CoreGallery {
  	attributes {
    	images
  	}
}

query GetAllPostsWhichSupportPostBlocks {
    nodeByUri(uri: "/posts/hello-world") {
    ... on NodeWithPostBlocks {
      editorBlocks {
        __typename
        clientId
        parentClientId
        name
		# query the CoreParagraph here since it is allowed
        ...Paragraph

		# We cannot query the CoreGallery block here because this block type is not allowed
		# ...Gallery
      }
    }
  }
}
```

## NodeWithPageBlocks

* An interface type which represents a list of `PageBlock` types.

Here is an example query:

```graphql
fragment Paragraph on CoreParagraph {
  	attributes {
    	content
  	}
}

fragment Gallery on CoreGallery {
  	attributes {
   		content
  	}
}

query GetAllPostsWhichSupportPageBlocks {
	nodeByUri(uri: "/about") {
    ... on NodeWithPageBlocks {
      editorBlocks {
        __typename
        clientId
        parentClientId
        name
		# query the CoreParagraph here since it is allowed
        ...Paragraph

		# Since the CoreGallery block here is allowed, we can query it as well
		...Gallery
      }
    }
  }
}
```
